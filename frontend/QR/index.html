<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Scanner</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/html5-qrcode" defer></script>
</head>
<body>
  <div class="scanner-container">
    <h1>QR Scanner</h1>
    <div id="reader" style="width: 300px; margin: 20px auto;"></div>
    <p id="status">Scanning for QR codes...</p>
    <button id="stopBtn">Stop Scanner</button>
    <div id="resultBox" style="display:none; margin-top: 20px; background:#9cf; padding:10px; border-radius:8px;"></div>
  </div>

  <script>
    let html5QrCode;

    window.addEventListener('load', () => {
      const resultBox = document.getElementById('resultBox');
      const status = document.getElementById('status');
      const stopBtn = document.getElementById('stopBtn');

      html5QrCode = new Html5Qrcode("reader");

      html5QrCode.start(
        { facingMode: "environment" },
        {
          fps: 10,
          qrbox: 250
        },
        qrCodeMessage => {
          console.log("QR Detected:", qrCodeMessage); // âœ… DEBUG LOG
          resultBox.innerHTML = `<strong>QR Code Detected:</strong><br>${qrCodeMessage}`;
          resultBox.style.display = "block";
          status.textContent = "QR code detected!";
        },
        errorMessage => {
          // Optional: console.log("No QR detected:", errorMessage);
        }
      ).catch(err => {
        console.error("Camera start failed:", err);
        status.textContent = "Could not start camera";
      });

      stopBtn.addEventListener('click', () => {
        html5QrCode.stop().then(() => {
          status.textContent = "Scanner stopped.";
        }).catch(err => {
          console.error("Stop error:", err);
        });
      });
    });
  </script>
</body>
</html>

